"use strict";(self.webpackChunkmanual=self.webpackChunkmanual||[]).push([[5300],{3905:function(e,t,r){r.d(t,{Zo:function(){return s},kt:function(){return c}});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var p=n.createContext({}),u=function(e){var t=n.useContext(p),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},s=function(e){var t=u(e.components);return n.createElement(p.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,l=e.originalType,p=e.parentName,s=i(e,["components","mdxType","originalType","parentName"]),m=u(r),c=a,f=m["".concat(p,".").concat(c)]||m[c]||d[c]||l;return r?n.createElement(f,o(o({ref:t},s),{},{components:r})):n.createElement(f,o({ref:t},s))}));function c(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=r.length,o=new Array(l);o[0]=m;var i={};for(var p in t)hasOwnProperty.call(t,p)&&(i[p]=t[p]);i.originalType=e,i.mdxType="string"==typeof e?e:a,o[1]=i;for(var u=2;u<l;u++)o[u]=r[u];return n.createElement.apply(null,o)}return n.createElement.apply(null,r)}m.displayName="MDXCreateElement"},856:function(e,t,r){r.r(t),r.d(t,{assets:function(){return p},contentTitle:function(){return o},default:function(){return d},frontMatter:function(){return l},metadata:function(){return i},toc:function(){return u}});var n=r(3117),a=(r(7294),r(3905));const l={sidebar_position:1},o="Auto select",i={unversionedId:"profile-format/proxygroup/auto",id:"profile-format/proxygroup/auto",title:"Auto select",description:"A group of proxies with a test url in it.",source:"@site/docs/profile-format/proxygroup/auto.md",sourceDirName:"profile-format/proxygroup",slug:"/profile-format/proxygroup/auto",permalink:"/docs/profile-format/proxygroup/auto",draft:!1,editUrl:"https://github.com/getsurfboard/manual/edit/main/docs/profile-format/proxygroup/auto.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Manually select",permalink:"/docs/profile-format/proxygroup/select"},next:{title:"Fallback",permalink:"/docs/profile-format/proxygroup/fallback"}},p={},u=[{value:"Sample",id:"sample",level:2},{value:"Profile sample",id:"profile-sample",level:3},{value:"Policy path sample",id:"policy-path-sample",level:3},{value:"Format",id:"format",level:2},{value:"Param",id:"param",level:2}],s={toc:u};function d(e){let{components:t,...r}=e;return(0,a.kt)("wrapper",(0,n.Z)({},s,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"auto-select"},"Auto select"),(0,a.kt)("p",null,"A group of proxies with a test url in it."),(0,a.kt)("p",null,"After VPN started, a ",(0,a.kt)("inlineCode",{parentName:"p"},"HTTP HEAD")," request will be sent towards the test url, delay will be recorded when success response reach."),(0,a.kt)("p",null,"Proxy with the shortest delay will be the selection of the group."),(0,a.kt)("p",null,"The test will be triggered at intervals constantly."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Reference: ",(0,a.kt)("a",{parentName:"li",href:"https://en.wikipedia.org/wiki/Regular_expression"},"https://en.wikipedia.org/wiki/Regular_expression")),(0,a.kt)("li",{parentName:"ul"},"Reference: ",(0,a.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/HEAD"},"https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/HEAD"))),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"Auto select group selection can not be changed manually")),(0,a.kt)("h2",{id:"sample"},"Sample"),(0,a.kt)("h3",{id:"profile-sample"},"Profile sample"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ini"},"[Proxy Group]\nAutoTestGroup = url-test, ProxySOCKS5, ProxySOCKS5TLS, url=http://www.gstatic.com/generate_204, interval=600, tolerance=100, timeout=5, hidden=true\n\n[Rule]\n# traffic match 'www.google.com' will be redirect through AutoTestGroup's selected proxy\nDOMAIN, www.google.com, AutoTestGroup\n")),(0,a.kt)("h3",{id:"policy-path-sample"},"Policy path sample"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ini"},"ProxyHTTP = http, 1.2.3.4, 443, username, password\nProxyHTTPS = https, 1.2.3.4, 443, username, password, skip-cert-verify=true, sni=www.google.com\nProxySOCKS5 = socks5, 1.2.3.4, 443, username, password, udp-relay=false\n")),(0,a.kt)("p",null,"Just like ",(0,a.kt)("a",{parentName:"p",href:"/docs/profile-format/proxy"},"[Proxy]")," Section definition but without section header in it."),(0,a.kt)("p",null,"Use policy path can separate proxies and rules definition, and reduce profile complexity. "),(0,a.kt)("h2",{id:"format"},"Format"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ini"},"{group name} = url-test, {proxies, ...}, {policy-path}, {policy-regex-filter}, {url}, {interval}, {tolerance}, {timeout}, {hidden}, include-all-proxies = {include-all-proxies}\n")),(0,a.kt)("h2",{id:"param"},"Param"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Name"),(0,a.kt)("th",{parentName:"tr",align:null},"Value"),(0,a.kt)("th",{parentName:"tr",align:null},"Mandatory"),(0,a.kt)("th",{parentName:"tr",align:null},"Note"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"group name"),(0,a.kt)("td",{parentName:"tr",align:null},"-"),(0,a.kt)("td",{parentName:"tr",align:null},"true"),(0,a.kt)("td",{parentName:"tr",align:null},"name of group, will be used like a key to the group")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"proxies"),(0,a.kt)("td",{parentName:"tr",align:null},"-"),(0,a.kt)("td",{parentName:"tr",align:null},"true"),(0,a.kt)("td",{parentName:"tr",align:null},"A list of proxy name defined in ",(0,a.kt)("inlineCode",{parentName:"td"},"[Proxy]")," section, divided by comma")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"policy-path"),(0,a.kt)("td",{parentName:"tr",align:null},"-"),(0,a.kt)("td",{parentName:"tr",align:null},"false"),(0,a.kt)("td",{parentName:"tr",align:null},"A list of proxy defined in url content",(0,a.kt)("br",null),"Content format will be presented below")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"policy-regex-filter"),(0,a.kt)("td",{parentName:"tr",align:null},"-"),(0,a.kt)("td",{parentName:"tr",align:null},"false"),(0,a.kt)("td",{parentName:"tr",align:null},"Usable if policy-path defined.",(0,a.kt)("br",null),"A regular expression which will apply on proxy name in policy-path url content, only proxies which match expression will be reserved.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"url"),(0,a.kt)("td",{parentName:"tr",align:null},"http scheme url"),(0,a.kt)("td",{parentName:"tr",align:null},"false"),(0,a.kt)("td",{parentName:"tr",align:null},"Test url which is used by HTTP HEAD request.",(0,a.kt)("br",null),"If url is not defined, '",(0,a.kt)("a",{href:"/docs/profile-format/general/proxy_test_url"},"proxy-test-url"),"' defined in ",(0,a.kt)("inlineCode",{parentName:"td"},"[General]")," section will be used.",(0,a.kt)("br",null),"If 'proxy-test-url' is not defined either, '",(0,a.kt)("a",{parentName:"td",href:"http://www.gstatic.com/generate_204'"},"http://www.gstatic.com/generate_204'")," will be used.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"interval"),(0,a.kt)("td",{parentName:"tr",align:null},"-"),(0,a.kt)("td",{parentName:"tr",align:null},"false"),(0,a.kt)("td",{parentName:"tr",align:null},"Unit: seconds, define test trigger intervals. Default value: 600")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"tolerance"),(0,a.kt)("td",{parentName:"tr",align:null},"-"),(0,a.kt)("td",{parentName:"tr",align:null},"false"),(0,a.kt)("td",{parentName:"tr",align:null},"Unit: millisecond",(0,a.kt)("br",null),"Proxy selection is only changed when new selected proxy has a lower delay than previous proxy minus this value.",(0,a.kt)("br",null),"Default value: 100")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"timeout"),(0,a.kt)("td",{parentName:"tr",align:null},"-"),(0,a.kt)("td",{parentName:"tr",align:null},"false"),(0,a.kt)("td",{parentName:"tr",align:null},"Unit: seconds",(0,a.kt)("br",null),"Test exceed this maximum allowed duration will be treated as failure.",(0,a.kt)("br",null),"Default value: 5")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"hidden"),(0,a.kt)("td",{parentName:"tr",align:null},"true",(0,a.kt)("br",null),"false"),(0,a.kt)("td",{parentName:"tr",align:null},"false"),(0,a.kt)("td",{parentName:"tr",align:null},"Whether to display this proxy group in user interface, even set to false, this group will still take effect.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"include-all-proxies"),(0,a.kt)("td",{parentName:"tr",align:null},"true",(0,a.kt)("br",null),"false"),(0,a.kt)("td",{parentName:"tr",align:null},"false"),(0,a.kt)("td",{parentName:"tr",align:null},"Include all proxies defined in whole profile, can be used with ",(0,a.kt)("inlineCode",{parentName:"td"},"policy-regex-filter")," to filter some of the proxies")))),(0,a.kt)("admonition",{type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"Only ",(0,a.kt)("strong",{parentName:"p"},"HTTP")," scheme url is allowed as test url, ",(0,a.kt)("strong",{parentName:"p"},"HTTPS")," and any other types of scheme url will not be supported.")),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"{proxies} and {policy-path} can be used together in the same proxy group")),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"You can use a profile url as policy path url, only proxies defined in ",(0,a.kt)("inlineCode",{parentName:"p"},"[Proxy]")," section will be used")))}d.isMDXComponent=!0}}]);